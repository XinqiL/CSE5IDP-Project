<!DOCTYPE html>
<html lang="en">   
    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="viewport" content="width= device-width, initial-scale=1.0">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <title> Events List </title>
    </head>
    <style>
         body{
            background-color: rgb(209, 206, 31);
           
         }
          .container{
            width: 80%;
            margin: 0 auto;
            position: fixed;
            display: flex;
            justify-content: center;
            
            height: 100vh;
            width: 100vw;
            margin: 0px;
          }
          .table{
            width: 100%;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: white;
            background-color: black;
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px black;
            margin-top: 50px;
            
         
          }
          
    </style>
    <div1>
     
           
             <a class="nav-link" href="home.html"><p1>Home</p1></a>
           
    </div1>
        
       
       
    <div class = "container " >
        <table class="table">
            <thead>
                <tr>
                    <th>Event Name</th>
                    <th>Category</th>
                    <th>Email</th>
                  
                    <th>Wifi</th>
                    <th>Location</th>

                </tr>
            </thead>
            <tbody id="tbody1"></tbody>  
        </table>
    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need

         // Import the functions you need from the SDKs you need
       import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
       import { getDatabase, ref, set, child, onValue, get}  from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
        
      
        // Your web app's Firebase configuration
       const firebaseConfig = {
         apiKey: "AIzaSyCt0yXXOD9uHvMD-CvmKTUEUYiB1FIhmjk",
         authDomain: "iwan-15fbc.firebaseapp.com",
         databaseURL: "https://iwan-15fbc-default-rtdb.firebaseio.com",
         projectId: "iwan-15fbc",
         storageBucket: "iwan-15fbc.appspot.com",
         messagingSenderId: "750233763697",
         appId: "1:750233763697:web:7c1f869a66d993516440d0",
         measurementId: "G-06QRYB54WN"
};
      
        // Initialize Firebase
       const app = initializeApp(firebaseConfig);
      
       
       const database = getDatabase(app);

       var stdNo = 0;
       var tbody = document.getElementById('tbody1');

       function AddItemToTable(name,Category,email,Wifi){
         let trow = document.createElement('tr');
         let td1 = document.createElement('td');
         let td2 = document.createElement('td');
         let td3 = document.createElement('td');
         let td4 = document.createElement('td');
         let td5 = document.createElement('td');
         



        td1.innerHTML = ++evtNo;
        td2.innerHTML = name;
        td3.innerHTML = Category;
        td4.innerHTML = email;
        td5.innerHTML =Wifi;
        td6.innerHTML = `<button class="btn btn-danger" onclick="DeleteItem(this)">Delete</button>`;
        trow.appendChild(td1);
        trow.appendChild(td2);
        trow.appendChild(td3);
        trow.appendChild(td4);
        trow.appendChild(td5);
       
        tbody.appendChild(trow);
       }

       function AddAllItemsToTable(TheEvent){
          stdNo= 0;
          tbody.innerHTML = '';
          TheEvent.forEach(event => {
          AddItemToTable(event.eventName,event.Category,event.email,event.wifi,event.location);
         
           });
        
       }
       function GetAllDataOnce(){
         const dbRef = ref(database);
         
         get(child(dbRef, "EventsList/")).then((snapshot)=>{
            
            var events = [];
            snapshot.forEach((childSnapshot)=>{
                events.push(childSnapshot.val());
            }); 
            AddAllItemsToTable(events);
            
            });
         }
       
       function GetAllDataRealTime(){
          const dbRef = ref(database, "EventsList/");
          onValue(dbRef, (snapshot) => {
            var events = [];
            snapshot.forEach((childSnapshot)=>{
                events.push(childSnapshot.val());
            }); 
            AddAllItemsToTable(events);
        })
       }
       window.onload = GetAllDataRealTime;

  </script>


</body>
</html>

    